# {{é¡¹ç›®åç§°}} æ¥å£æ–‡æ¡£

> ğŸ“… ç”Ÿæˆæ—¶é—´ï¼š{{YYYY-MM-DD}}
> ğŸ“Š æ¥å£æ€»æ•°ï¼š{{XX}} ä¸ª
> ğŸ”§ æŠ€æœ¯æ ˆï¼šReact/Vue + MSW Mock
> ğŸ“ Mock è·¯å¾„ï¼š`./mock/`

---

## ç›®å½•

- [1. é€šç”¨è§„èŒƒ](#1-é€šç”¨è§„èŒƒ)
- [2. å¿«é€Ÿæ¥å…¥ MSW Mock](#2-å¿«é€Ÿæ¥å…¥-msw-mock)
- [3. {{æ¨¡å—å}} æ¨¡å—](#3-æ¨¡å—å-æ¨¡å—)
- [4. é”™è¯¯ç æ€»è§ˆ](#4-é”™è¯¯ç æ€»è§ˆ)

---

## 1. é€šç”¨è§„èŒƒ

### è¯·æ±‚åœ°å€

| ç¯å¢ƒ | Base URL |
|------|----------|
| å¼€å‘ï¼ˆMockï¼‰ | `http://localhost:3000`ï¼ˆç”± MSW æ‹¦æˆªï¼‰ |
| æµ‹è¯•ç¯å¢ƒ | `https://staging.api.example.com` |
| ç”Ÿäº§ç¯å¢ƒ | `https://api.example.com` |

### è®¤è¯æ–¹å¼

æ‰€æœ‰**éœ€è¦ç™»å½•**çš„æ¥å£ï¼Œè¯·åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ï¼š

```http
Authorization: Bearer <token>
```

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,
  "data": {},
  "message": "success"
}
```

### åˆ†é¡µæ¥å£å“åº”æ ¼å¼

```json
{
  "code": 200,
  "data": {
    "list": [],
    "total": 100,
    "page": 1,
    "pageSize": 10
  },
  "message": "success"
}
```

---

## 2. å¿«é€Ÿæ¥å…¥ MSW Mock

### å®‰è£…

```bash
npm install msw --save-dev
npx msw init public/ --save
```

### å¯ç”¨ï¼ˆå…¥å£æ–‡ä»¶ï¼‰

```javascript
if (import.meta.env.DEV) {
  const { worker } = await import('./mock/browser')
  await worker.start({ onUnhandledRequest: 'bypass' })
}
```

### Mock ç›®å½•ç»“æ„

```
mock/
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ index.js        â† æ±‡æ€»å…¥å£
â”‚   â”œâ”€â”€ user.js         â† ç”¨æˆ·æ¨¡å—
â”‚   â””â”€â”€ ...
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ user.json       â† ç”¨æˆ·æ•°æ®
â”‚   â””â”€â”€ ...
â””â”€â”€ browser.js          â† Worker å¯åŠ¨å…¥å£
```

---

## 3. {{æ¨¡å—å}} æ¨¡å—

### {{METHOD}} {{PATH}} â€” {{æè¿°}}

**è®¤è¯**ï¼šâœ…/âŒ

**è¯·æ±‚å‚æ•°**ï¼ˆBody - JSON / Query / Pathï¼‰

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|:----:|------|
| {{name}} | {{type}} | âœ…/âŒ | {{è¯´æ˜}} |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "key": "value"
}
```

**å“åº”ç¤ºä¾‹**ï¼ˆæˆåŠŸ 200ï¼‰

```json
{
  "code": 200,
  "data": {},
  "message": "success"
}
```

**é”™è¯¯ç **

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |

---

## 4. é”™è¯¯ç æ€»è§ˆ

| é”™è¯¯ç  | å«ä¹‰ | å‰ç«¯å¤„ç†å»ºè®® |
|--------|------|-------------|
| 200 | æˆåŠŸ | â€” |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | è¡¨å•æ ¡éªŒæç¤º |
| 401 | æœªæˆæƒ / Token å¤±æ•ˆ | è·³è½¬ç™»å½•é¡µ |
| 403 | æ— æƒé™ | æç¤º"æš‚æ— æƒé™" |
| 404 | èµ„æºä¸å­˜åœ¨ | æç¤º"æ•°æ®ä¸å­˜åœ¨" |
| 409 | æ•°æ®å†²çª | æç¤ºå…·ä½“å†²çªåŸå›  |
| 429 | è¯·æ±‚é¢‘ç‡è¿‡é«˜ | æç¤º"æ“ä½œè¿‡äºé¢‘ç¹" |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æç¤º"æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•" |
