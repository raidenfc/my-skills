# ç¤ºä¾‹é¡¹ç›® æ¥å£æ–‡æ¡£

> ğŸ“… ç”Ÿæˆæ—¶é—´ï¼š2026-02-24
> ğŸ“Š æ¥å£æ€»æ•°ï¼š6 ä¸ª
> ğŸ”§ æŠ€æœ¯æ ˆï¼šVue 3 + Axios + MSW Mock

---

## ç›®å½•

- [1. é€šç”¨è§„èŒƒ](#1-é€šç”¨è§„èŒƒ)
- [2. å¿«é€Ÿæ¥å…¥ MSW Mock](#2-å¿«é€Ÿæ¥å…¥-msw-mock)
- [3. user æ¨¡å—](#3-user-æ¨¡å—)
- [4. activity æ¨¡å—](#4-activity-æ¨¡å—)
- [5. é”™è¯¯ç æ€»è§ˆ](#5-é”™è¯¯ç æ€»è§ˆ)

---

## 1. é€šç”¨è§„èŒƒ

### è¯·æ±‚åœ°å€

| ç¯å¢ƒ | Base URL |
|------|----------|
| å¼€å‘ï¼ˆMockï¼‰ | `http://localhost:3000`ï¼ˆç”± MSW æ‹¦æˆªï¼‰ |
| æµ‹è¯•ç¯å¢ƒ | `https://staging.api.example.com` |
| ç”Ÿäº§ç¯å¢ƒ | `https://api.example.com` |

### è®¤è¯æ–¹å¼

```http
Authorization: Bearer <token>
```

Token é€šè¿‡ [ç™»å½•æ¥å£](#post-apiuserlogin--login) è·å–ï¼Œæœ‰æ•ˆæœŸ 7 å¤©ã€‚

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{ "code": 200, "data": {}, "message": "success" }
```

---

## 2. å¿«é€Ÿæ¥å…¥ MSW Mock

```bash
npm install msw --save-dev
npx msw init public/ --save
```

```javascript
if (import.meta.env.DEV) {
  const { worker } = await import('./mock/browser')
  await worker.start({ onUnhandledRequest: 'bypass' })
}
```

---

## 3. user æ¨¡å—

### POST /api/user/login â€” login

**è®¤è¯**ï¼šâŒ æ— éœ€

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|:----:|------|
| username | string | âœ… | ç”¨æˆ·å |
| password | string | âœ… | å¯†ç  |

**å“åº”ç¤ºä¾‹**ï¼ˆæˆåŠŸ 200ï¼‰

```json
{
  "code": 200,
  "data": {
    "token": "mock-token-1-1709280000000",
    "userInfo": { "id": 1, "username": "admin", "nickname": "ç®¡ç†å‘˜" }
  },
  "message": "ç™»å½•æˆåŠŸ"
}
```

**é”™è¯¯ç **ï¼š`401` ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯

---

### GET /api/user/{id} â€” getProfile

**è®¤è¯**ï¼šâœ… éœ€è¦ Bearer Token

| å‚æ•° | ç±»å‹ | ä½ç½® | è¯´æ˜ |
|------|------|------|------|
| id | number | path | ç”¨æˆ· ID |

**å“åº”ç¤ºä¾‹**ï¼ˆæˆåŠŸ 200ï¼‰

```json
{
  "code": 200,
  "data": { "id": 1, "username": "admin", "nickname": "ç®¡ç†å‘˜", "avatar": "https://..." },
  "message": "success"
}
```

**é”™è¯¯ç **ï¼š`401` Token å¤±æ•ˆ / `404` ç”¨æˆ·ä¸å­˜åœ¨

---

### GET /api/user/list â€” listï¼ˆåˆ†é¡µï¼‰

**è®¤è¯**ï¼šâœ… éœ€è¦

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|:----:|--------|------|
| page | number | âŒ | 1 | é¡µç  |
| pageSize | number | âŒ | 10 | æ¯é¡µæ¡æ•° |

**å“åº”ç¤ºä¾‹**ï¼ˆåˆ†é¡µæ ¼å¼ï¼‰

```json
{
  "code": 200,
  "data": { "list": [...], "total": 50, "page": 1, "pageSize": 10 },
  "message": "success"
}
```

---

## 4. activity æ¨¡å—

### GET /api/activity/list â€” listï¼ˆåˆ†é¡µï¼‰

**è®¤è¯**ï¼šâœ… éœ€è¦

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|:----:|------|
| page | number | âŒ | é¡µç  |
| pageSize | number | âŒ | æ¯é¡µæ¡æ•° |
| status | string | âŒ | çŠ¶æ€ï¼š`active`/`ended`/`upcoming` |

**å“åº”ç¤ºä¾‹**

```json
{
  "code": 200,
  "data": {
    "list": [{ "id": 1, "title": "æ˜¥èŠ‚ç§¯åˆ†æ´»åŠ¨", "status": "active" }],
    "total": 20, "page": 1, "pageSize": 10
  },
  "message": "success"
}
```

---

### GET /api/activity/{id} â€” detail

**è®¤è¯**ï¼šâœ… éœ€è¦

| å‚æ•° | ç±»å‹ | ä½ç½® | è¯´æ˜ |
|------|------|------|------|
| id | number | path | æ´»åŠ¨ ID |

**å“åº”ç¤ºä¾‹**

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "title": "æ˜¥èŠ‚ç§¯åˆ†æ´»åŠ¨",
    "description": "æ´»åŠ¨è¯¦ç»†è¯´æ˜...",
    "status": "active",
    "startAt": "2024-02-01T00:00:00.000Z",
    "endAt": "2024-02-15T23:59:59.000Z"
  },
  "message": "success"
}
```

**é”™è¯¯ç **ï¼š`404` æ´»åŠ¨ä¸å­˜åœ¨

---

### POST /api/activity/join â€” join

**è®¤è¯**ï¼šâœ… éœ€è¦

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|:----:|------|
| activityId | number | âœ… | æ´»åŠ¨ ID |

**å“åº”ç¤ºä¾‹**

```json
{ "code": 200, "data": { "joinId": 123 }, "message": "æŠ¥åæˆåŠŸ" }
```

**é”™è¯¯ç **ï¼š`400` æ´»åŠ¨å·²ç»“æŸ / `409` å·²æŠ¥åè¯¥æ´»åŠ¨

---

## 5. é”™è¯¯ç æ€»è§ˆ

| é”™è¯¯ç  | å«ä¹‰ | å‰ç«¯å¤„ç†å»ºè®® |
|--------|------|-------------|
| 200 | æˆåŠŸ | â€” |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | è¡¨å•æ ¡éªŒæç¤º |
| 401 | æœªæˆæƒ / Token å¤±æ•ˆ | è·³è½¬ç™»å½•é¡µ |
| 403 | æ— æƒé™ | æç¤º"æš‚æ— æƒé™" |
| 404 | èµ„æºä¸å­˜åœ¨ | æç¤º"æ•°æ®ä¸å­˜åœ¨" |
| 409 | æ•°æ®å†²çª | æç¤ºå…·ä½“å†²çªåŸå›  |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æç¤º"æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•" |
